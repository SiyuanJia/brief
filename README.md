# 财经时事资讯简报生成器

> 一键将新闻链接转化为精美的财经简报，集成AI内容提炼、智能高亮、自动插图生成和长图导出功能

## ✨ 产品亮点

### 🎯 核心价值
- **一键生成**：输入新闻链接，自动生成专业级财经简报
- **AI驱动**：智能提炼关键信息，自动标记重点内容
- **视觉精美**：手绘风格插图 + 多彩高亮 + 专业排版
- **即用即走**：无需注册，浏览器直接使用

### 🚀 产品流程

```
📰 输入新闻链接 → 🔗 智能爬取内容 → 🤖 AI分析提炼 → 🎨 生成配图 → 📄 渲染简报 → 📥 导出长图
```

#### 第一步：智能内容获取
- 支持主流新闻网站链接解析
- 自动过滤广告、评论等无关内容
- 提取纯净的新闻正文

#### 第二步：AI智能分析
- **结构化提炼**：自动将长文分解为2-6个逻辑模块
- **关键信息标记**：智能识别重要数据、观点、结论
- **多彩高亮系统**：
  - 🔴 红色：关键数据、重要指标
  - 🔵 蓝色：核心观点、市场分析
  - 🟢 绿色：政策信息、官方声明
  - 🟡 黄色：趋势预测、专家观点

#### 第三步：自动插图生成
- 根据内容自动生成手绘风格图表
- 统一的视觉风格：米色背景(#f5f2e8) + 彩色铅笔风格
- 包含真实数据标注和财经图标元素

#### 第四步：专业简报渲染
- 类杂志排版设计
- 响应式布局，支持移动端
- 自动生成二维码，便于分享

## 🎨 设计亮点

### 视觉设计
- **配色方案**：温暖米色背景 + 四色高亮系统，既专业又温和
- **字体选择**：Noto Sans SC，确保中文显示效果
- **布局设计**：卡片式分段，清晰的信息层次
- **品牌元素**：渐变色标题下划线 + 精致的品牌胶囊

### 交互设计
- **进度可视化**：四步骤圆形图标，实时显示处理进度
- **加载体验**：优雅的加载动画 + 详细的状态提示
- **日期编辑**：点击即可修改简报日期
- **示例引导**：内置示例文章，降低使用门槛

### 移动端优化
- 响应式设计，完美适配手机屏幕
- 触摸友好的按钮尺寸
- 移动端专属的布局调整

## 🔧 技术架构

### 前端技术栈
- **纯原生实现**：HTML5 + CSS3 + Vanilla JavaScript
- **无框架依赖**：轻量级，加载速度快
- **第三方库**：
  - dom-to-image：长图导出
  - qrcode.js：二维码生成
  - FileSaver.js：文件下载

### 后端架构
- **阿里云函数计算**：Serverless架构，按需付费
- **统一代理设计**：一个函数处理三类上游服务
  - Unifuns：网页内容提取
  - Gemini 2.5 Flash：AI内容分析
  - Nano Banana：AI图片生成
- **安全设计**：API密钥完全隐藏在服务端环境变量

### 核心算法

#### 智能高亮匹配算法
采用三层容错策略，大幅提升高亮命中率：

1. **严格匹配**：精确匹配，仅放宽空白和标点差异
2. **片段匹配**：按中文标点切分，优先匹配最长片段（≥4字符）
3. **相似度匹配**：基于编辑距离算法，相似度≥95%视为匹配成功

```javascript
// 相似度计算核心逻辑
function similarityRatio(a, b) {
  const A = normalizeForSimilarity(a); // 去标签、标点、空白
  const B = normalizeForSimilarity(b);
  const dist = levenshtein(A, B);      // 编辑距离
  return 1 - dist / Math.max(A.length, B.length);
}
```

#### 内容结构化提炼
- **模块化分割**：智能识别文章逻辑结构
- **信息分类**：自动区分数据、观点、引用
- **真实性保证**：所有数据必须来源于原文，严禁编造

## 🛡️ 安全特性

### API密钥保护
- **零前端暴露**：前端代码不包含任何API密钥
- **环境变量管理**：所有密钥存储在服务端环境变量
- **统一代理转发**：前端请求统一通过代理函数转发

### CORS安全策略
- 白名单机制，仅允许指定域名访问
- 支持开发环境和生产环境分离配置

## 📱 使用体验

### 操作流程
1. **点击"输入链接"按钮**
2. **粘贴新闻URL或选择示例文章**
3. **点击"生成简报"，等待AI处理**
4. **查看生成的精美简报**
5. **点击下载按钮导出长图**

### 支持的新闻源
- 主流财经媒体网站
- 新闻门户网站
- 官方机构发布页面

### 导出功能
- **高清长图**：适合社交媒体分享
- **包含二维码**：便于回溯原文链接
- **品牌标识**：专业的视觉识别

## 🎯 应用场景

- **投资研究**：快速整理市场资讯
- **内容创作**：财经自媒体素材制作
- **团队协作**：内部信息分享
- **学习笔记**：财经知识整理

## 🔮 技术创新点

1. **多服务统一代理**：创新的后端架构设计，一个函数处理多个上游API
2. **智能高亮算法**：三层容错机制，解决AI生成内容与原文不完全匹配的问题
3. **视觉一致性**：自动化的插图风格控制，确保视觉效果统一
4. **无服务器架构**：完全基于云函数，零运维成本

## 🚀 部署说明

### 环境要求
- 阿里云函数计算服务
- 302.ai API账号（Unifuns + Gemini + Nano Banana）

### 快速部署
1. 将 `multi_handler.py` 打包上传到阿里云函数
2. 配置环境变量（API密钥和端点）
3. 设置CORS白名单
4. 更新前端代理地址

详细部署步骤请参考项目文档。

---

**让AI为你的财经资讯增添专业与美感** ✨
